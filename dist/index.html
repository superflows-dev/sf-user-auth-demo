<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>&lt;sf-nav&gt; Demo</title>
        <!-- Integration material icons as they are used in sf-nav -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Google fonts integration -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;300;400;600&display=swap" rel="stylesheet">
        <!-- Add all the custom styling in this css file -->
        <link rel="stylesheet" href="styles.css">
        <!-- Integration the web components module -->
        <!-- Integration lit and sf-nav web components module -->
        <script src="./util.js"></script>
        <script type="module">
            import {LitElement, html, css} from 'https://unpkg.com/lit-element/lit-element.js?module';
            import {SfUserAuth} from 'https://unpkg.com/sf-user-auth/sf-user-auth.js?module';
        </script>
    </head>

    <body>

        <br /><br />
        <div class="logo-container">
            <a href="index.html"><img src="https://superflows-images.s3.ap-south-1.amazonaws.com/superflows_black_transparent_200.png" /></a>
        </div>
        <div class="logo-container">
            <h1>Sample Project For MOD_NAME</h1>
        </div>

        <div class="ui-container user">
            <div><h4>You are signed in as</h4></div>
            <div><h2 class="user-email"></h2></div>
            <br />
            <button onclick="signOut()">Sign Out</button>
            <br />
            <br />
        </div>

        <div class="ui-container admin">
            <div><h4>You are signed in as</h4></div>
            <div><h2 class="admin-email"></h2></div>
            <br />
            <button onclick="signOut()">Sign Out</button>
            <br />
            <div><a href="auth.html#auth/admin"><h3>Admin Console</h3></a></div>
            <br />
            <br />
        </div>

        <div class="ui-container auth">
            <div><h4>You are not signed in</h4></div>
            <button onclick="signIn()">Sign In</button>
        </div>

        <div class="info-container">

            <h2>Purpose</h2>
            The purpose of this sample code is to give you a boilerplate along with a ready-to-be-consumed integration with the authentication supermod. Please feel free to copy this code and use it in your app.

            <h2>Code Structure</h2>
            The code consists of the following files:

            <h3>index.html</h3>
            <ul>
                <li>This file functions as the entry point of the sample app</li>
                <li>It is simply a wrapper for the authentication supermod declared in auth.html</li>
                <li>If the user is signed in, it shows the sign in information</li>
                <li>If the user is not signed in, it shows a link to the sign in page</li>
            </ul> 

            <h3>auth.html</h3>
            <ul>
                <li>This file integrates the authentication supermod</li>
                <li>It handles the sign in and sign out events as well</li>
            </ul> 
    
            <h3>styles.css</h3>
            <ul>
                <li>Custom css styles are specified in this css stylesheet</li>
            </ul> 

            <h3>util.js</h3>
            <ul>
                <li>This javascript file contains some simple utilities</li>
            </ul> 

            <h2>Resources</h2>

            <h3>Tutorial</h3>
            <a href="https://superflows.dev/docs/sfuserauth">Read</a>

            <h3>UI Themes</h3>
            <a href="https://replit.com/@SuperflowsAppv3/SfUserAuth-Slate">Slate</a>
            <a href="https://replit.com/@SuperflowsAppv3/SfUserAuth-Taxi">Taxi</a>
            <a href="https://replit.com/@SuperflowsAppv3/SfUserAuth-Stark">Stark</a>
            <a href="https://replit.com/@SuperflowsAppv3/SfUserAuth-Glass">Glass</a>

            <h3>Superflows Console</h3>
            <a href="https://superflows.dev">Sign In</a>

            <h3>YouTube Channel</h3>
            <a href="https://www.youtube.com/channel/UCYNJLCE48yir4DsquciBuDw">Subscribe</a>

            <h3>Questions?</h3>
            <a href="https://discord.gg/ksEXS4P9h6">Join the community</a>

        </div>

        
        <script>

            function signOut() {
                window.location.href = 'auth.html#auth/signout';
            }

            function signIn() {
                window.location.href = 'auth.html#auth/signin';
            }

            function init() {

                const email = readCookie('email');
                const admin = readCookie('admin');

                console.log(email);
                
                if(email == null || email.length == 0) {
                    
                    document.querySelector('.auth').style.display = 'flex';
                    document.querySelector('.user').style.display = 'none';
                    document.querySelector('.admin').style.display = 'none';
                
                } else {

                    if(admin) {

                    document.querySelector('.admin-email').innerHTML = email;
                    document.querySelector('.auth').style.display = 'none';
                    document.querySelector('.user').style.display = 'none';
                    document.querySelector('.admin').style.display = 'flex';

                    } else {

                    document.querySelector('.user-email').innerHTML = email;
                    document.querySelector('.auth').style.display = 'none';
                    document.querySelector('.user').style.display = 'flex';
                    document.querySelector('.admin').style.display = 'none';

                    }

                }

            }

            init();

        </script>

    </body>
  
</html>
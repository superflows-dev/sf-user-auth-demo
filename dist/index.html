<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>&lt;sf-nav&gt; Demo</title>
        <!-- Integration material icons as they are used in sf-nav -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Google fonts integration -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;300;400;600&display=swap" rel="stylesheet">
        <!-- Add all the custom styling in this css file -->
        <link rel="stylesheet" href="styles.css">
        <!-- Integration the web components module -->
        <script src="https://unpkg.com/@webcomponents/webcomponentsjs@latest/webcomponents-loader.js"></script>
        <!-- Integration lit and sf-nav web components module -->
        <script src="./util.js"></script>
        <script type="module">
            import {LitElement, html, css} from 'https://unpkg.com/lit-element/lit-element.js?module';
            import {SfUserAuth} from 'https://unpkg.com/sf-user-auth/sf-user-auth.js?module';
        </script>
        <style>
            sf-nav:not(:defined) {
            display: none;
            }
        </style>
    </head>

    <body>

        <br /><br />
        <div class="logo-container">
            <a href="index.html"><img src="https://superflows-images.s3.ap-south-1.amazonaws.com/superflows_black_transparent_200.png" /></a>
        </div>
        <div class="logo-container">
            <h1>Sample Code For Project ABC</h1>
        </div>

        <div class="ui-container user">
            <div><h4>You are signed in as</h4></div>
            <div><h2 class="user-email"></h2></div>
            <br />
            <button onclick="signOut()">Sign Out</button>
            <br />
            <br />
        </div>

        <div class="ui-container admin">
            <div><h4>You are signed in as</h4></div>
            <div><h2 class="admin-email"></h2></div>
            <br />
            <button onclick="signOut()">Sign Out</button>
            <br />
            <div><a href="auth.html#auth/admin"><h3>Admin Console</h3></a></div>
            <br />
            <br />
        </div>

        <div class="ui-container auth">
            <div><h4>You are not signed in</h4></div>
            <button onclick="signIn()">Sign In</button>
        </div>

        <script>

            function signOut() {
                window.location.href = 'auth.html#auth/signout';
            }

            function signIn() {
                window.location.href = 'auth.html#auth/signin';
            }

            function init() {

                const email = readCookie('email');
                const admin = readCookie('admin');

                console.log(email);
                
                if(email == null || email.length == 0) {
                    
                    document.querySelector('.auth').style.display = 'flex';
                    document.querySelector('.user').style.display = 'none';
                    document.querySelector('.admin').style.display = 'none';
                
                } else {

                    if(admin) {

                    document.querySelector('.admin-email').innerHTML = email;
                    document.querySelector('.auth').style.display = 'none';
                    document.querySelector('.user').style.display = 'none';
                    document.querySelector('.admin').style.display = 'flex';

                    } else {

                    document.querySelector('.user-email').innerHTML = email;
                    document.querySelector('.auth').style.display = 'none';
                    document.querySelector('.user').style.display = 'flex';
                    document.querySelector('.admin').style.display = 'none';

                    }

                }

            }

            init();

        </script>

    </body>
  
</html>